<html>
  <head>
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/c-frame/aframe-extras@7.5.2/dist/aframe-extras.min.js"></script>
  </head>
  <body>
    <a-scene>
        <a-entity text="value: Sroithongthae Auinok 653380346-6; color: #ff8000; align: center; alphaTest: 1.01; baseline: top; lineHeight: 0.96; xOffset: 0.33; yOffset: 0.36; zOffset: -0.669" position="0 2.02025 0"></a-entity>
        <a-entity gltf-model="model/Christmas Presents.glb" animation-mixer="" scale="2.16279 2.16279 2.16279" position="-11.91722 0.92654 18.2749" animation__circle="property: position; dur: 6000; easing: linear; loop: NaN" rotation="-0.9860603654201467 81.23166436246758 0.7471369648505934"></a-entity>
        <a-entity gltf-model="model/Snowman.glb" animation-mixer="" scale="2.7045 2.36228 3.77658" position="12.26857 1.27079 10.84126" animation__circle="property: position; dur: 6000; easing: linear; loop: NaN" rotation="0.8050057021588066 1.7818987428568602 0.5116513110518252"></a-entity>
                <a-entity gltf-model="model/Christmas Presents.glb" animation-mixer="" scale="3.56421 2.51511 2.85174" position="11.89103 1.19345 -19.42877" animation__circle="property: position; dur: 6000; easing: linear; loop: NaN" rotation="-0.9860603654201467 81.23166436246758 0.7471369648505934"></a-entity>
        <a-entity gltf-model="model/Christmas Tree.glb" animation-mixer="" scale="19.05079 14.46882 20.70724" position="20.20601 3.14042 -20.28176" animation__circle="property: position; dur: 6000; easing: linear; loop: NaN" rotation="1.208940947726037 -73.81644457788448 -0.2618417123747862"></a-entity>
        <a-entity gltf-model="model/Santa Claus.glb" animation-mixer="" scale="4.70893 3.71472 3.87574" position="-19.58074 -0.96235 16.70343" animation__circle="property: position; dur: 6000; easing: linear; loop: NaN" rotation="-1.2072220743406445 131.02914521067285 -0.2710090370968794"></a-entity>
        <a-entity gltf-model="model/Christmas Presents.glb" animation-mixer="" scale="1.335 1.654 2.839" position="11.74844 0.885 16.50584" animation__circle="property: position; dur: 6000; easing: linear; loop: NaN" rotation="-0.986 81.232 0.747"></a-entity>
        <a-entity gltf-model="model/carriage.glb" animation-mixer="" scale="1.15823 1.15823 1.15823" position="5.15364 7.943 6.46624" rotation="1.9469105878545374 46.98311215852264 -6.91044396707286"></a-entity>
        <a-entity gltf-model="model/Snowy Trees.glb" animation-mixer="" scale="3.73523 3.26259 5.21585" position="0.62518 1.2326 -19.50794" animation__circle="property: position; dur: 6000; easing: linear; loop: NaN" rotation="-0.6010327270922335 98.34935144979607 0.7408344291041544"></a-entity>
        <a-entity gltf-model="model/Snowy Trees.glb" animation-mixer="" scale="3.73523 3.26259 5.21585" position="-4.20279 1.37347 -18.22387" animation__circle="property: position; dur: 6000; easing: linear; loop: NaN" rotation="-0.6010327270922335 98.34935144979607 0.7408344291041544"></a-entity>
        <a-entity gltf-model="model/Winter hut floating mountain..glb" animation-mixer="" scale="3.73523 3.26259 5.21585" position="-38.69652 9.55578 -1.23194" animation__circle="property: position; dur: 6000; easing: linear; loop: NaN" rotation="-0.6010327270922335 98.34935144979607 0.7408344291041544"></a-entity>
        <a-entity gltf-model="model/Cube Woman Character.glb" animation-mixer=""scale="0.84941 0.62371 0.73388" position="7.85918 0.32906 1.14655" rotation="-1.7314784568853478 -44.90155648881236 -0.13407212406061264"
        animation="property: position; 
                   to: 4.85918 0.32906 1.14655; 
                   dur: 3000; 
                   easing: linear; 
                   loop: true; 
                   dir: alternate"></a-entity>
        <a-entity gltf-model="model/Snowy Trees.glb" animation-mixer="" scale="3.73523 3.26259 5.21585" position="-8.60306 1.32682 -17.57807" animation__circle="property: position; dur: 6000; easing: linear; loop: NaN" rotation="-0.6010327270922335 98.34935144979607 0.7408344291041544"></a-entity>
        <a-entity gltf-model="model/Snowy Trees.glb" animation-mixer="" scale="3.73523 3.26259 5.21585" position="-12.94071 1.28083 -16.94146" animation__circle="property: position; dur: 6000; easing: linear; loop: NaN" rotation="-0.6010327270922335 98.34935144979607 0.7408344291041544"></a-entity>
        <a-entity id="citizen"gltf-model="model/Citizen 2.glb" animation-mixer="clip: Walk; loop: repeat;" scale="1.24169 0.91175 1.0728" position="6.22636 0.02604 -6.51806" rotation="0 -90 0"></a-entity>
<a-scene>
  <a-entity gltf-model="model/Cube Guy Character.glb" animation-mixer=""scale="1.28232 1.12006 1.79064" position="-11.85586 -0.31489 -5.57114" rotation="-0.6010327270922335 98.34935144979607 0.7408344291041544"
  animation="property: position; to: -5 -0.31489 -5.57114; dur: 4000; easing: linear; loop: true; dir: alternate">
  </a-entity>
  <script>
    const citizen = document.querySelector('#citizen');
    // ตำแหน่งเริ่มต้นและจุดหมายปลายทาง
    let position = { x: 6.22636, y: 0.02604, z: -6.51806 };
    const start = { ...position }; // จุดเริ่มต้น
    const end = { x: 0, y: 0.02604, z: -6.51806 }; // จุดหมายปลายทาง
    // ความเร็วและสถานะการเคลื่อนที่
    const speed = 0.02; // ความเร็ว
    let forward = true; // กำหนดทิศทางการเคลื่อนที่ (true = เดินไปข้างหน้า)
    function walk() {
      // เลือกทิศทาง
      const target = forward ? end : start;
      // คำนวณการเคลื่อนที่ในแกน x และ z
      const dx = target.x - position.x;
      const dz = target.z - position.z;
      // ตรวจสอบว่าถึงจุดหมายปลายทางหรือยัง
      if (Math.abs(dx) < 0.01 && Math.abs(dz) < 0.01) {
        forward = !forward; // สลับทิศทาง
        citizen.setAttribute('rotation', forward ? '0 -90 0' : '0 90 0'); // หมุนตัวกลับ
      } else {
        // อัปเดตตำแหน่ง
        const distance = Math.sqrt(dx * dx + dz * dz);
        position.x += (dx / distance) * speed;
        position.z += (dz / distance) * speed;
        // ตั้งค่าตำแหน่งใหม่ให้โมเดล
        citizen.setAttribute('position', position);
      }
      requestAnimationFrame(walk); // ทำซ้ำ
    }
    // เริ่มการเดิน
    walk();
  </script>

      <a-sky color="#FFFFFF" src="1.jpg"></a-sky>
      <a-plane position="0 0 0" rotation="-90 0 0" width="50" height="50" material="src:url(4.jpg); repeat: 20 20"></a-plane>
    </a-scene>
  </body>
</html>
